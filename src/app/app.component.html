<mat-toolbar>
  <span>{{title}}</span>
</mat-toolbar>

<div>
  <h5>Persons</h5>
  <mat-list role="list">
    @for (person of persons; track person) {
      <mat-list-item role="listitem">{{ person }}</mat-list-item>
    }
  </mat-list>
  <form (ngSubmit)="addPerson()">
    <mat-form-field>
      <mat-label>Person Name</mat-label>
      <input matInput name="personName" [(ngModel)]="newPersonName">
    </mat-form-field>
    <button mat-flat-button type="submit">Add Person</button>
  </form>
</div>

<div>
  <h5>Items</h5>
  @if (items.length) {
    <table>
      <td>Name</td><td>Price</td><td>Shared between</td><td>Action</td>
      @for (item of items; track item.name) {
        <tr>
          <td>{{ item.name }}</td>
          <td>{{ item.price }}</td>
          <td>{{ item.splitBetween.join(', ') }}</td>
          <td><button (click)="removeItem(item)">Remove</button></td>
        </tr>
      }
    </table>
  }
  <form (ngSubmit)="addItem()">
    <mat-form-field>
      <mat-label>Item Name</mat-label>
      <input matInput name="itemName" [(ngModel)]="itemName">
    </mat-form-field>
    <mat-form-field>
      <mat-label>Item Price</mat-label>
      <input matInput type="number" name="itemPrice" [(ngModel)]="itemPrice">
    </mat-form-field>
    <mat-form-field>
      <mat-label>Shared between</mat-label>
      <mat-select name="itemPersons" [(ngModel)]="selected" multiple>
        @for (person of persons; track person) {
          <mat-option [value]="person">{{person}}</mat-option>
        }
      </mat-select>
    </mat-form-field>
    <button mat-flat-button type="submit">Add Item</button>
  </form>
</div>

<div>
  <h5>Per person cost</h5>
  <button mat-flat-button (click)="split()">Split</button>
  @if (splits) {
    <table>
      <td>Person</td><td>Cost</td>
      @for (person of persons; track person) {
        <tr>
          <td>{{ person }}</td>
          <td>{{ splits[person] }}</td>
        </tr>
      }
    </table>
  }
</div>